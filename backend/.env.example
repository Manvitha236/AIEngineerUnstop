# Backend environment example for OpenRouter provider

# LLM provider selection: 'openrouter' or 'gemini'
LLM_PROVIDER=openrouter

# OpenRouter API configuration
OPENROUTER_API_KEY=
OPENROUTER_MODEL=openrouter/sonoma-sky-alpha
OPENROUTER_BASE=https://openrouter.ai/api/v1/chat/completions
OPENROUTER_TIMEOUT=12
OPENROUTER_MAX_TOKENS=512
OPENROUTER_RETRY_MAX_TOKENS=256
OPENROUTER_TEMPERATURE=0.4
OPENROUTER_MIN_INTERVAL_MS=1200
OPENROUTER_JITTER_MS=120
OPENROUTER_RATE_LIMIT_BACKOFF_S=5
OPENROUTER_COOLDOWN_S=60
OPENROUTER_APP_NAME=SupportAssistant
OPENROUTER_REFERRER=http://localhost

# Fallbacks and switches
FALLBACK_LOCAL_REPLY=1
CHAIN_FALLBACK_GEMINI=0

# Gemini (optional fallback)
GOOGLE_API_KEY=
GEMINI_MODEL=gemini-1.5-flash
GEMINI_TIMEOUT=6
GEMINI_BACKOFF_SECONDS=600

# Other existing app settings go below (DB, IMAP/Gmail, etc.)

# Retrieval Augmented Generation mode: off | lazy | sync
RAG_MODE=lazy

# Optional API key to protect mutating endpoints
SUPPORT_API_KEY=dev123

# Logging level (INFO, DEBUG, WARNING)
LOG_LEVEL=INFO

# ---------------- Email Retrieval (Live Gmail / IMAP) ----------------
# To enable Gmail live fetching:
# 1. In your Google Account: Security -> Enable 2-Step Verification (if not already).
# 2. Create an App Password (select "Mail" + your device) and copy the 16-char value.
# 3. Enable IMAP in Gmail settings (See: Settings -> Forwarding and POP/IMAP -> Enable IMAP).
# 4. Fill the variables below (do NOT commit real secrets to git).
# 5. Start backend then click "Live Gmail" in the UI (or POST /api/emails/fetch/mode?provider=gmail).

# Gmail username (full address)
GMAIL_USER=your_email_here

# Gmail App Password (NOT your regular password)
GMAIL_APP_PASSWORD=your_app_password_here

# Optional: Label to read (default INBOX). Example: Support
EMAIL_GMAIL_LABEL=INBOX

# Poll interval in seconds (default 120 if unset). Lower for faster demos, higher to reduce API usage.
EMAIL_POLL_INTERVAL=180

# Optional: Force provider at startup (otherwise UI toggle/runtime override controls it)
EMAIL_PROVIDER=gmail     # or gmail / demo / smtp-inbox

# Allow skipping API key locally (set to 1 to bypass auth dependencies)
ALLOW_UNAUTH_LOCAL=1

# For generic IMAP instead of Gmail (example):
# EMAIL_IMAP_HOST=imap.example.com
# EMAIL_IMAP_USER=user@example.com
# EMAIL_IMAP_PASSWORD=app_password_here
